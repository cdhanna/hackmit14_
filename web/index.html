<!DOCTYPE html>
<html>

    <head>
    	<title> Delicious DFA </title>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


		<script src="nfa.js"></script>
		<script src="edit.js"></script>
		<script src="visual.js"></script>
		
		<link rel="stylesheet" type="text/css" href="style.css">
    	
    </head>
    
    
    <body>
    
		<h1 id='title'> Delicious DFA </h1>

    	<canvas id='canvas' width='900px' height='600px'>
    		Browser is not supported
    	</canvas>

    	<script>
    		$(document).ready(function() { 
			
    			//get data from html
    			var canvas = document.getElementById('canvas');
    			var editor = new Editor();

    			//get the mouse position on the canvas 
    			function getMousePos( evt){
    				var rect = canvas.getBoundingClientRect();
    				return {x:evt.clientX - rect.left, y:evt.clientY - rect.top};
    			}

    			$('#canvas').on('mousedown', function(e){
    				
    				var mousePos = getMousePos(e);
    				editor.onMouseDown(mousePos);
    			});

    			$('#canvas').on('mouseup', function(e){
    				var mousePos = getMousePos(e);
    				editor.onMouseUp(mousePos);
    			});

                $('#canvas').on('mousemove', function(e){
                    var mousePos = getMousePos(e);
                    editor.update(mousePos);

                });

    			 function update(){
                    editor.draw(canvas);
                    editor.updateNormal();
    			 }


                 editor.generateFrom("a|b");

				setInterval(update, 10);
    		});
    	</script>


    </body>

</html>